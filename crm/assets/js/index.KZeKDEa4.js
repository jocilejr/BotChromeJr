const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/menu.ozJbydFg.js","assets/js/3f386df4-66b4-47ad-97a2-c2d071401b89.BCD8Y2wu.js","assets/js/189edf5c-7ce5-4017-8784-8540896c075c.CC2qRq32.js","assets/js/4d6f8e04-4378-4a05-b60b-71003f5fe15e.BjYrUADq.js","index.js","assets/js/caeebc6c-71d6-4a3b-b767-a00fcb991bd4.Cl8rWDT9.js","assets/js/68ae5497-5ebc-481c-a9d2-85107b1c0ec7.NIGUFBhG.js","assets/js/1df5af6a-3301-4295-a713-25f88a4923df.bQ6GTs-_.js","assets/js/6e3c0337-d27b-48dd-a1c1-9d8cfbed4476.IXUq4trc.js","assets/js/934b4c83-a22f-4cd3-a630-23a0e8fb3756.BHBdr8YF.js","assets/js/showAudio.CX-Gcnyc.js","assets/js/createAudio.DkHPeoQx.js"])))=>i.map(i=>d[i]);
import{V as E,j as s,a as O,_ as y}from"./3f386df4-66b4-47ad-97a2-c2d071401b89.BCD8Y2wu.js";import{a as v}from"./189edf5c-7ce5-4017-8784-8540896c075c.CC2qRq32.js";import{a as B}from"./68ae5497-5ebc-481c-a9d2-85107b1c0ec7.NIGUFBhG.js";import{c as A}from"./caeebc6c-71d6-4a3b-b767-a00fcb991bd4.Cl8rWDT9.js";var I=function(i,u,e,a){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function c(d){try{t(a.next(d))}catch(f){o(f)}}function l(d){try{t(a.throw(d))}catch(f){o(f)}}function t(d){d.done?r(d.value):n(d.value).then(c,l)}t((a=a.apply(i,u||[])).next())})},R=function(i,u){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,n,r,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(t){return function(d){return l([t,d])}}function l(t){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,t[0]&&(e=0)),e;)try{if(a=1,n&&(r=t[0]&2?n.return:t[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,t[1])).done)return r;switch(n=0,r&&(t=[t[0]&2,r.value]),t[0]){case 0:case 1:r=t;break;case 4:return e.label++,{value:t[1],done:!1};case 5:e.label++,n=t[1],t=[0];continue;case 7:t=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(t[0]===6||t[0]===2)){e=0;continue}if(t[0]===3&&(!r||t[1]>r[0]&&t[1]<r[3])){e.label=t[1];break}if(t[0]===6&&e.label<r[1]){e.label=r[1],r=t;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(t);break}r[2]&&e.ops.pop(),e.trys.pop();continue}t=u.call(i,e)}catch(d){t=[6,d],n=0}finally{a=r=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}},C=function(){return A()(function(i,u){return{render:"menu",setRender:function(e){return i({render:e})},audio64:"",setOnBase64:function(){return null},getBase64:function(e){var a=e.target.files[0],n=new FileReader;n.readAsDataURL(a),n.onload=function(){i({render:"view",audio64:n.result}),u().setOnBase64(n.result)}},removeAudio:function(){return i(function(){return u().setOnBase64(""),{render:"menu",audio64:""}})},stream:null,mediaRecorder:null,recordingStatus:"inactive",timer:0,timerInterval:null,getMicrophonePermission:function(){return I(void 0,void 0,void 0,function(){var e,a;return R(this,function(n){switch(n.label){case 0:if(!("MediaRecorder"in window))return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 2:return e=n.sent(),i({render:"create",stream:e,recordingStatus:"recording"}),u().startRecording(),[3,4];case 3:return a=n.sent(),alert(a),[3,4];case 4:return[3,6];case 5:alert("The MediaRecorder API is not supported in your browser"),n.label=6;case 6:return[2]}})})},startRecording:function(){var e=u(),a=e.stream,n=e.recordingStatus;if(a){var r="audio/webm",o=new MediaRecorder(a,{mimeType:r});i({recordingStatus:"recording",mediaRecorder:o});var c=[];o.ondataavailable=function(t){t.data.size>0&&c.push(t.data)},o.onstop=function(){return I(void 0,void 0,void 0,function(){var t,d,f,g,w,_,h;return R(this,function(m){switch(m.label){case 0:if(n==="stopped")return[2];i({render:"mp3_convert"}),t=function(){var x=new Blob(c,{type:r});return new Promise(function(S,j){var b=new FileReader;b.onloadend=function(){return S(b.result)},b.onerror=j,b.readAsDataURL(x)})},m.label=1;case 1:return m.trys.push([1,4,5,6]),g=(f=B).post,w=["".concat(E.backend_utils,"api/audioToMp3")],h={},[4,t()];case 2:return[4,g.apply(f,w.concat([(h.base64Audio=m.sent(),h),{headers:{"Content-Type":"application/json",accept:"application/json"}}]))];case 3:return d=m.sent(),i({render:"view",audio64:d.data.base64}),u().setOnBase64(d.data.base64),[3,6];case 4:return _=m.sent(),i({render:"menu"}),console.error("erro ao tentar converter o audio em MP3",_),[3,6];case 5:return i({recordingStatus:"stopped",timerInterval:null,timer:0,mediaRecorder:null,stream:null}),[7];case 6:return[2]}})})},o.start();var l=setInterval(function(){i(function(t){return{timer:t.timer+1}})},1e3);i({timerInterval:l})}},finalizarRecording:function(){var e=u(),a=e.mediaRecorder,n=e.recordingStatus,r=e.timerInterval;a&&n==="recording"&&(i({recordingStatus:"inactive"}),a.stop()),r&&(clearInterval(r),i({timerInterval:null,timer:0}))},pauseRecording:function(){var e=u(),a=e.mediaRecorder,n=e.recordingStatus,r=e.timerInterval;a&&n==="recording"&&(i({recordingStatus:"paused"}),a.pause()),r&&(clearInterval(r),i({timerInterval:null}))},resumeRecording:function(){var e=u(),a=e.mediaRecorder,n=e.recordingStatus,r=e.timerInterval;if(a&&n==="paused"&&(i({recordingStatus:"recording"}),a.resume()),!r){var o=setInterval(function(){i(function(c){return{timer:c.timer+1}})},1e3);i({timerInterval:o})}},stopRecording:function(){var e=u().timerInterval;e&&clearInterval(e),i({recordingStatus:"stopped",timerInterval:null,timer:0,mediaRecorder:null,stream:null,render:"menu"})}}})},p=function(){return p=Object.assign||function(i){for(var u,e=1,a=arguments.length;e<a;e++){u=arguments[e];for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&(i[n]=u[n])}return i},p.apply(this,arguments)},T=A()(function(i,u){return{container:{},idioma:"pt",setIdioma:function(e){return i({idioma:e})},getContainer:function(e){var a=u().container;if(a[e])return a[e];var n=C();return i(function(r){var o;return{container:p(p({},r.container),(o={},o[e]=n,o))}}),n},deleteContainer:function(e){return i(function(a){var n=p({},a.container);return delete n[e],{container:n}})},donwloadAudio:function(e){for(var a=atob(e.split(",")[1]),n=e.split(";")[0].split(":")[1],r=new ArrayBuffer(a.length),o=new Uint8Array(r),c=0;c<a.length;c++)o[c]=a.charCodeAt(c);var l=new Blob([r],{type:n}),t=URL.createObjectURL(l),d=document.createElement("a");d.href=t,d.download="audio_".concat("100000-1000".replace(/[018]/g,function(f){var g=crypto.getRandomValues(new Uint8Array(1))[0]&15>>parseInt(f,10)/4;return(g^parseInt(f,10)).toString(16)}),".mp3"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(t)}}}),M={aguardeGerarAudio:{pt:"Aguarde",en:"Wait",es:"Esperar"},importarAudio:{pt:"Importar Audio",en:"Import Audio",es:"Importar Audio"},gravarAudio:{pt:"Gravar Audio",en:"Record Audio",es:"Grabar Audio"},excluir:{pt:"Excluir",en:"Delete",es:"Eliminar"},baixar:{pt:"Baixar",en:"Download",es:"Descargar"}},L=v.lazy(function(){return y(()=>import("./menu.ozJbydFg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))}),D=v.lazy(function(){return y(()=>import("./showAudio.CX-Gcnyc.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]))}),k=v.lazy(function(){return y(()=>import("./createAudio.DkHPeoQx.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]))});function U(i){var u=i.id,e=i.base64,a=i.onBase64,n=i.idioma,r=T(),o=r.getContainer,c=r.deleteContainer,l=r.setIdioma,t=o(u)().render;v.useEffect(function(){l(n)},[n]),v.useEffect(function(){return o(u).setState({render:e&&(e==null?void 0:e.length)!==0?"view":"menu",audio64:e,setOnBase64:a}),function(){c(u)}},[]);var d={menu:s.jsx(L,{id:u}),view:s.jsx(D,{id:u}),create:s.jsx(k,{id:u}),mp3_convert:s.jsxs("div",{className:"flex justify-center gap-1 pb-1 pr-2",children:[s.jsx("span",{className:"loading loading-spinner loading-md text-[var(--primaria)]"}),s.jsx(O,{weight:"600",children:M.aguardeGerarAudio[n]})]})};return s.jsx("aside",{"type-render":"Components","render-name":"audio",children:s.jsx(v.Suspense,{fallback:s.jsx(s.Fragment,{}),children:d[t]})})}const F=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));export{M as L,F as i,T as u};
